FROM node:20 AS build

WORKDIR /app

COPY package*.json ./

# ğŸ”§ package-lock.jsonì´ ì—†ì–´ ì‹¤íŒ¨í•˜ëŠ” ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ --legacy-peer-deps ì˜µì…˜ ì¶”ê°€
RUN npm install --legacy-peer-deps

COPY . .

# ğŸ”§ viteê°€ ì—†ìœ¼ë©´ ì—¬ê¸°ì„œ ì‹¤íŒ¨í•˜ë¯€ë¡œ í™•ì¸ ìš©ì´
RUN npx vite build

FROM nginx:stable-alpine
COPY --from=build /app/dist /usr/share/nginx/html

EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
